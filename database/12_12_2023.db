alter table ingresos_egresos add COLUMN empresas bigint unsigned
ALTER TABLE ingresos_egresos ADD CONSTRAINT empresas FOREIGN KEY(empresas) REFERENCES empresas(id);


--creacion de asociaciones
CREATE TABLE solicitud_asociaciones (
	id INT NOT NULL AUTO_INCREMENT,
  	empresa_solicitante bigint unsigned NOT NULL,
	empresa_receptora bigint unsigned NOT NULL,
	vehiculo BOOLEAN,
	clientes BOOLEAN,
  	updated_at TIMESTAMP,
  	created_at TIMESTAMP,
  	PRIMARY KEY (id),
  	FOREIGN KEY (empresa_solicitante) REFERENCES empresas(id),
  	FOREIGN KEY (empresa_receptora) REFERENCES empresas(id)
)

alter TABLE solicitud_asociaciones add COLUMN aceptado BOOLEAN DEFAULT 0

alter TABLE solicitud_asociaciones add COLUMN rechazado BOOLEAN DEFAULT 0

alter table empresas add column telefono int(15) DEFAULT 0

--Se agrega el origen del cliente 
alter table clientes add COLUMN origen int DEFAULT 0 


CREATE TABLE `actividads` (
  `id` bigint unsigned not null auto_increment primary key,
  `nombre` varchar(255) not null,
  `empresas` bigint unsigned not null,
  `created_at` timestamp null,
  `updated_at` timestamp null,
  foreign key (`empresas`) references `empresas` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE `motivos` (
  `id` bigint unsigned not null auto_increment primary key,
  `nombre` varchar(255) not null,
  `empresas` bigint unsigned not null,
  `created_at` timestamp null,
  `updated_at` timestamp null,
  foreign key (`empresas`) references `empresas` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


CREATE TABLE `logisticas` (
  `id` bigint unsigned not null auto_increment primary key,
  `placa` varchar(255) not null,
  `fecha` datetime not null,
  `Valor` int not null,
  `finalizado` tinyint(1) not null,
  `actividads` bigint unsigned not null,
  `motivos` bigint unsigned not null,
  `empresas` bigint unsigned not null,
  `created_at` timestamp null,
  `updated_at` timestamp null,
  foreign key (`actividads`) references `actividads` (`id`),
  foreign key (`motivos`) references `motivos` (`id`),
  foreign key (`empresas`) references `empresas` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE proveedors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255),
    apellidos VARCHAR(255),
    cedula VARCHAR(255),
    direccion VARCHAR(255),
    telefono VARCHAR(255),
    telefono2 VARCHAR(255),
    email VARCHAR(255),
    empresas BIGINT UNSIGNED,
    FOREIGN KEY (empresas) REFERENCES empresas(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
